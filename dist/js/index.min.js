var _this=void 0;function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var a;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(a="Object"===(a={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:a)||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}function _iterableToArrayLimit(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,l,o,i=[],u=!0,s=!1;try{if(l=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;u=!1}else for(;!(u=(n=l.call(a)).done)&&(i.push(n.value),i.length!==t);u=!0);}catch(e){s=!0,r=e}finally{try{if(!u&&null!=a.return&&(o=a.return(),Object(o)!==o))return}finally{if(s)throw r}}return i}}function _arrayWithHoles(e){if(Array.isArray(e))return e}var timeout,controllPanelCheckboxes=document.querySelectorAll(".simulation__control-panel-checkbox"),controllPanelInputs=document.querySelectorAll(".simulation__control-panel-input"),controllPanelInputRounds=document.querySelector(".simulation__control-panel-input--rounds"),controllPanelInputInitialCapital=document.querySelector(".simulation__control-panel-input--capital"),controllPanelInputBet=document.querySelector(".simulation__control-panel-input--bet"),controllPanelInputNumberOfPlayersForAStrategy=document.querySelector(".simulation__control-panel-input--number-players"),controllPanelInputChanseOfWinForStrategy=document.querySelector(".simulation__control-panel-input--chanse-of-win"),controllPanelInputInfoValues=document.querySelectorAll(".simulation__control-panel-input-value"),header=document.querySelector(".header"),width=320,height=200,margin=45,mediaQuerySmall=window.matchMedia("(min-width: 576px)"),mediaQueryMedium=window.matchMedia("(min-width: 768px)"),mediaQueryExtraLarge=window.matchMedia("(min-width: 1200px)"),rounds=+controllPanelInputRounds.value,initialCapital=+controllPanelInputInitialCapital.value,numberOfPlayersForStrategy=+controllPanelInputNumberOfPlayersForAStrategy.value,chanseOfWinOfTheStrategy=+controllPanelInputChanseOfWinForStrategy.value/100,lastRounds=[],numLines=10,headerHeight=header.clientHeight,headerWidth=(console.log(headerHeight),header.clientWidth),tickSpacing=Math.ceil(rounds/10),tickValues=d3.range(0,rounds+1,tickSpacing),headerScaleX=d3.scaleLinear().domain([0,100]).range([0,headerWidth]),headerScaleY=d3.scaleLinear().domain([-20,20]).range([headerHeight,0]),headerBackgroundSvg=d3.select(".header__svg").attr("width",headerWidth).attr("height",headerHeight+.3*headerHeight),headerCreateLines=d3.line().x(function(e){return headerScaleX(e.x)}).y(function(e){return headerScaleY(e.y)}).curve(d3.curveLinear),headerLinesGroup=headerBackgroundSvg.append("g"),headerLinesData=headerLinesGroup.selectAll(".header__svg-line").data(Array.from({length:numLines},generateRandomPath)),headerLines=headerLinesData.enter().append("path").attr("class","header__svg-line").merge(headerLinesData).attr("d",headerCreateLines).attr("stroke",function(e,t){return d3.interpolateBlues(t/numLines)}).attr("stroke-width",2).attr("fill","none").attr("opacity",.6),strategies=(headerBackgroundSvg.on("mousemove",function(e){var e=_slicedToArray(d3.pointer(e),2),r=e[0],l=e[1];headerLines.each(function(e){e=e.map(function(e){var t=headerScaleX(e.x)-r,a=headerScaleY(e.y)-l,n=Math.sqrt(t*t+a*a);return n<100?(a=Math.atan2(a,t),t=(100-n)/20,{x:e.x+Math.cos(a)*t,y:e.y+Math.sin(a)*t}):e});d3.select(this).transition().duration(200).ease(d3.easeLinear).attr("d",headerCreateLines(e))})}),headerBackgroundSvg.on("mouseleave",function(){clearTimeout(timeout),timeout=setTimeout(function(){headerLines.transition().duration(500).ease(d3.easeCubicOut).attr("d",function(e){return headerCreateLines(e)})},300)}),{flatBet:function(e,t){return t},martingale:function(e,t,a){return a?2*t:t},antiMartingale:function(e,t,a){return a?t:2*t}}),baseColors={flatBet:d3.hsl("green"),martingale:d3.hsl("red"),antiMartingale:d3.hsl("blue")},getShadedColor=function(e,t,a){e=baseColors[e];return d3.hsl(e.h+t/a*70,e.s,e.l*(1-t/(a+1)*.75)).formatRgb()},strategyPlayers={flatBet:[],martingale:[],antiMartingale:[]},scaleX=(mediaQuerySmall.matches&&(width=400,height=250),mediaQueryMedium.matches&&(width=500,height=300),mediaQueryExtraLarge.matches&&(width=600,height=350),d3.scaleLinear().domain([0,rounds]).range([margin,width-margin])),scaleY=d3.scaleLinear().domain([0,2*initialCapital]).range([height-margin,margin]),svg=d3.select(".simulation__chart").attr("width",width).attr("height",height),gridGroup=svg.append("g").attr("class","simulation__chart-grid-group"),xAxis=svg.append("g").attr("transform","translate(0,".concat(height-margin,")")).call(d3.axisBottom(scaleX).tickValues(tickValues)),yAxis=svg.append("g").attr("transform","translate(".concat(margin,",0)")).call(d3.axisLeft(scaleY)),yGrid=d3.axisLeft(scaleY).tickSize(2*margin-width).tickFormat(""),line=d3.line().x(function(e){return scaleX(e.index)}).y(function(e){return scaleY(e.value)}).curve(d3.curveLinear),pathGroup=svg.append("g"),pointsGroup=svg.append("g"),tooltip=svg.append("g").attr("class","simulation__chart-tooltip"),tooltipText=tooltip.append("text");function updateChart(){gridGroup.attr("transform","translate(".concat(margin,",0)")).call(yGrid);var e=Object.entries(strategyPlayers).flatMap(function(e){var e=_slicedToArray(e,2),a=e[0],n=e[1];return n.map(function(e,t){return{strategy:a,playerData:e,playerIndex:t,totalPlayers:n.length}})}),e=pathGroup.selectAll(".strategy-line").data(e);e.enter().append("path").attr("class","strategy-line").attr("stroke",function(e){return getShadedColor(e.strategy,e.playerIndex,e.totalPlayers)}).attr("stroke-width",2).attr("fill","none").attr("d",function(e){return line(e.playerData)}).each(function(e){var t=this.getTotalLength();d3.select(this).attr("stroke-dasharray",t+" "+t).attr("stroke-dashoffset",t).transition().duration(750).ease(d3.easeLinear).attr("stroke-dashoffset",0)}).merge(e).attr("d",function(e){return line(e.playerData)}),e.exit().remove()}var changeControllPanelInputInfoValues=function(){controllPanelInputInfoValues.forEach(function(e){var t=e.parentElement.nextElementSibling;e.textContent=t.value,t.getAttribute("data-add-percentage")&&(e.textContent="".concat(e.textContent,"%"))})},changeAControllPanelInputInfoValue=function(){controllPanelInputInfoValues.forEach(function(e){var t=e.parentElement.previousElementSibling;t===_this&&e.classList.contains("simulation__control-panel-info-value--current")&&(e.textContent=t.value)})};function generateRandomPath(){for(var e=[],t=15,a=0;a<=100;a+=10)t+=10*(Math.random()-.75),e.push({x:a,y:t});return e}var removeStrategyFromChart=function(){controllPanelCheckboxes.forEach(function(e){var t=e.dataset.strategyName;e.checked?(strategies[t]=handleStrategiesFunctions(t),strategyPlayers[t]=[]):(delete strategies[t],delete strategyPlayers[t])}),updateChart()};function disableCheckbox(){var t=controllPanelCheckboxes.length;controllPanelCheckboxes.forEach(function(e){e.checked||t--}),controllPanelCheckboxes.forEach(function(e){e.checked&&1===t?e.disabled=!0:e.disabled=!1})}var changeBetValue=function(){return initialCapital*(+controllPanelInputBet.value/100)};function correctControllPanelInputsValues(){controllPanelInputs.forEach(function(e){var t=e.value.replace(/\D/g,"");t<+e.getAttribute("min")||""===t?t=+e.getAttribute("min"):t>+e.getAttribute("max")&&(t=+e.getAttribute("max")),e.value=t}),rounds=+controllPanelInputRounds.value,initialCapital=+controllPanelInputInitialCapital.value,numberOfPlayersForStrategy=+controllPanelInputNumberOfPlayersForAStrategy.value,chanseOfWinOfTheStrategy=+controllPanelInputChanseOfWinForStrategy.value/100}var handleStrategiesFunctions=function(e){return{flatBet:function(e,t){return t},martingale:function(e,t,a){return a?2*t:t},antiMartingale:function(e,t,a){return a?t:2*t}}[e]};function simulateGame(){correctControllPanelInputsValues(),removeStrategyFromChart(),lastRounds=[],Object.keys(strategies).forEach(function(e){for(var t=0;t<numberOfPlayersForStrategy;t++){for(var a=[{index:0,value:initialCapital}],n=changeBetValue(),r=1;r<=rounds;r++){var l=Math.random()<chanseOfWinOfTheStrategy?n:-n,o=Math.max(0,a[r-1].value+l),n=strategies[e](o,n,l<0);if(a.push({index:r,value:o}),0===o){lastRounds.push(r);break}r===rounds&&lastRounds.push(rounds)}strategyPlayers[e].push(a)}});var e=Math.max.apply(Math,_toConsumableArray(lastRounds));scaleX.domain([0,e]),scaleY.domain([0,1.1*d3.max(Object.values(strategyPlayers).flat(2),function(e){return e.value})]),tickSpacing=Math.ceil(e/10),tickValues=d3.range(0,e+1,tickSpacing),xAxis.transition().duration(500).call(d3.axisBottom(scaleX).tickValues(tickValues)),yAxis.transition().duration(500).call(d3.axisLeft(scaleY).tickFormat(d3.format(".2s"))),updateChart()}d3.select(".simulation__control-panel-btn-start").on("click",simulateGame),changeControllPanelInputInfoValues(),controllPanelCheckboxes.forEach(function(e){return e.addEventListener("change",disableCheckbox)}),controllPanelInputs.forEach(function(e){return e.addEventListener("input",changeControllPanelInputInfoValues)}),controllPanelInputBet.addEventListener("input",changeBetValue),controllPanelInputInitialCapital.addEventListener("input",changeBetValue);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImZsYXRCZXQiLCJjb250cm9sbFBhbmVsQ2hlY2tib3hlcyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImNvbnRyb2xsUGFuZWxJbnB1dHMiLCJjb250cm9sbFBhbmVsSW5wdXRSb3VuZHMiLCJxdWVyeVNlbGVjdG9yIiwiY29udHJvbGxQYW5lbElucHV0SW5pdGlhbENhcGl0YWwiLCJjb250cm9sbFBhbmVsSW5wdXRCZXQiLCJjb250cm9sbFBhbmVsSW5wdXROdW1iZXJPZlBsYXllcnNGb3JBU3RyYXRlZ3kiLCJjb250cm9sbFBhbmVsSW5wdXRDaGFuc2VPZldpbkZvclN0cmF0ZWd5IiwiY29udHJvbGxQYW5lbElucHV0SW5mb1ZhbHVlcyIsImhlYWRlciIsInZhbHVlIiwid2lkdGgiLCJoZWlnaHQiLCJtYXJnaW4iLCJtZWRpYVF1ZXJ5U21hbGwiLCJ3aW5kb3ciLCJtZWRpYVF1ZXJ5RXh0cmFMYXJnZSIsImNvbnNvbGUiLCJtZWRpYVF1ZXJ5TWVkaXVtIiwiY2xpZW50V2lkdGgiLCJyb3VuZHMiLCJpbml0aWFsQ2FwaXRhbCIsInJhbmdlIiwibnVtTGluZXMiLCJkMyIsInNjYWxlTGluZWFyIiwiZG9tYWluIiwiaGVhZGVyV2lkdGgiLCJoZWFkZXJIZWlnaHQiLCJ0aWNrU3BhY2luZyIsInNlbGVjdCIsInRpY2tWYWx1ZXMiLCJhdHRyIiwiaGVhZGVyU2NhbGVYIiwiaGVhZGVyU2NhbGVZIiwiaGVhZGVyQ3JlYXRlTGluZXMiLCJsaW5lIiwieCIsImQiLCJ5IiwiY3VydmUiLCJjdXJ2ZUxpbmVhciIsImhlYWRlckxpbmVzRGF0YSIsImhlYWRlckxpbmVzR3JvdXAiLCJzZWxlY3RBbGwiLCJnZW5lcmF0ZVJhbmRvbVBhdGgiLCJoZWFkZXJMaW5lcyIsImRhdGEiLCJBcnJheSIsImludGVycG9sYXRlQmx1ZXMiLCJoZWFkZXJCYWNrZ3JvdW5kU3ZnIiwib24iLCJlbnRlciIsIl9kMyRwb2ludGVyIiwiYXBwZW5kIiwiX2QzJHBvaW50ZXIyIiwibW91c2VYIiwibWVyZ2UiLCJtb3VzZVkiLCJtYXAiLCJpIiwiTWF0aCIsImV2ZW50IiwiX3NsaWNlZFRvQXJyYXkiLCJhdGFuMiIsImFuZ2xlIiwiZWFjaCIsIm5ld0RhdGEiLCJwb2ludCIsImR4IiwiZHkiLCJkaXN0YW5jZSIsInNxcnQiLCJmb3JjZSIsImNvcyIsImNsZWFyVGltZW91dCIsInRpbWVvdXQiLCJzaW4iLCJ0aGlzIiwidHJhbnNpdGlvbiIsImR1cmF0aW9uIiwiZWFzZSIsImVhc2VMaW5lYXIiLCJtYXJ0aW5nYWxlIiwiYW50aU1hcnRpbmdhbGUiLCJwcmV2TG9zcyIsImJldCIsImhzbCIsImNhcGl0YWwiLCJiYXNlQ29sb3JzIiwiZ2V0U2hhZGVkQ29sb3IiLCJiYXNlQ29sb3IiLCJwbGF5ZXJJbmRleCIsInN0cmF0ZWd5UGxheWVycyIsInN0cmF0ZWd5IiwidG90YWxQbGF5ZXJzIiwiaCIsInMiLCJsIiwiZm9ybWF0UmdiIiwibWF0Y2hlcyIsInNjYWxlWSIsInlBeGlzIiwieUdyaWQiLCJwb2ludHNHcm91cCIsInN2ZyIsInRvb2x0aXAiLCJ0b29sdGlwVGV4dCIsInVwZGF0ZUNoYXJ0IiwiZ3JpZEdyb3VwIiwic3RyYXRlZ3lEYXRhIiwiT2JqZWN0IiwiZW50cmllcyIsInBsYXllcnMiLCJwbGF5ZXJEYXRhIiwiaW5kZXgiLCJ4QXhpcyIsImxlbmd0aCIsImNhbGwiLCJheGlzQm90dG9tIiwic2NhbGVYIiwiY29uY2F0IiwiYXhpc0xlZnQiLCJzdHJhdGVneUxpbmVzIiwidGlja1NpemUiLCJ0aWNrRm9ybWF0IiwiZXhpdCIsImNoYW5nZUNvbnRyb2xsUGFuZWxJbnB1dEluZm9WYWx1ZXMiLCJmb3JFYWNoIiwiSW5mb1ZhbHVlIiwiaW5wdXRPZkluZm9WYWx1ZSIsImdldEF0dHJpYnV0ZSIsImZsYXRNYXAiLCJfcmVmIiwiX3JlZjIiLCJ0ZXh0Q29udGVudCIsInJhbmRvbSIsImdldFRvdGFsTGVuZ3RoIiwidG90YWxMZW5ndGgiLCJyZW1vdmVTdHJhdGVneUZyb21DaGFydCIsImNoZWNrYm94IiwiY2hlY2tlZCIsInN0cmF0ZWdpZXMiLCJzdHJhdGVneU5hbWUiLCJoYW5kbGVTdHJhdGVnaWVzRnVuY3Rpb25zIiwicmVtb3ZlIiwicGFyZW50RWxlbWVudCIsIm5leHRFbGVtZW50U2libGluZyIsImRpc2FibGVDaGVja2JveCIsImNoYW5nZUFDb250cm9sbFBhbmVsSW5wdXRJbmZvVmFsdWUiLCJudW1PZlNlbGVjdGVkQ2hlY2tib3hlcyIsInByZXZpb3VzRWxlbWVudFNpYmxpbmciLCJfdGhpcyIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwiY29ycmVjdENvbnRyb2xsUGFuZWxJbnB1dHNWYWx1ZXMiLCJpbnB1dFZhbHVlIiwiaW5wdXQiLCJwdXNoIiwibnVtYmVyT2ZQbGF5ZXJzRm9yU3RyYXRlZ3kiLCJjaGFuc2VPZldpbk9mVGhlU3RyYXRlZ3kiLCJzdHJhdGVnaWVzRnVuY3Rpb25zIiwibGFzdFJvdW5kcyIsImtleXMiLCJjaGFuZ2VCZXRWYWx1ZSIsInJvdW5kIiwicmVwbGFjZSIsIm5ld1ZhbHVlIiwibWF4VmFsdWVPZkxhc3RSb3VuZHMiLCJtYXgiLCJhZGRFdmVudExpc3RlbmVyIiwiY2hhbmdlIiwiYXBwbHkiLCJfdG9Db25zdW1hYmxlQXJyYXkiLCJ2YWx1ZXMiLCJmbGF0IiwiY2VpbCIsImZvcm1hdCIsInNpbXVsYXRlR2FtZSJdLCJtYXBwaW5ncyI6InN2REFBQSxJQW9HQ0EsUUFwR0tDLHdCQUEwQkMsU0FBU0MsaUJBQWlCLHFDQUFxQyxFQUN6RkMsb0JBQXNCRixTQUFTQyxpQkFBaUIsa0NBQWtDLEVBQ2xGRSx5QkFBMkJILFNBQVNJLGNBQWMsMENBQTBDLEVBQzVGQyxpQ0FBbUNMLFNBQVNJLGNBQWMsMkNBQTJDLEVBQ3JHRSxzQkFBd0JOLFNBQVNJLGNBQWMsdUNBQXVDLEVBQ3RGRyw4Q0FBZ0RQLFNBQVNJLGNBQzlELGtEQUNELEVBQ01JLHlDQUEyQ1IsU0FBU0ksY0FDekQsaURBQ0QsRUFDTUssNkJBQStCVCxTQUFT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TixjQUFjIiwiZmlsZSI6ImluZGV4Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGNvbnRyb2xsUGFuZWxDaGVja2JveGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNpbXVsYXRpb25fX2NvbnRyb2wtcGFuZWwtY2hlY2tib3gnKVxyXG5jb25zdCBjb250cm9sbFBhbmVsSW5wdXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNpbXVsYXRpb25fX2NvbnRyb2wtcGFuZWwtaW5wdXQnKVxyXG5jb25zdCBjb250cm9sbFBhbmVsSW5wdXRSb3VuZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2ltdWxhdGlvbl9fY29udHJvbC1wYW5lbC1pbnB1dC0tcm91bmRzJylcclxuY29uc3QgY29udHJvbGxQYW5lbElucHV0SW5pdGlhbENhcGl0YWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2ltdWxhdGlvbl9fY29udHJvbC1wYW5lbC1pbnB1dC0tY2FwaXRhbCcpXHJcbmNvbnN0IGNvbnRyb2xsUGFuZWxJbnB1dEJldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zaW11bGF0aW9uX19jb250cm9sLXBhbmVsLWlucHV0LS1iZXQnKVxyXG5jb25zdCBjb250cm9sbFBhbmVsSW5wdXROdW1iZXJPZlBsYXllcnNGb3JBU3RyYXRlZ3kgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG5cdCcuc2ltdWxhdGlvbl9fY29udHJvbC1wYW5lbC1pbnB1dC0tbnVtYmVyLXBsYXllcnMnXHJcbilcclxuY29uc3QgY29udHJvbGxQYW5lbElucHV0Q2hhbnNlT2ZXaW5Gb3JTdHJhdGVneSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcblx0Jy5zaW11bGF0aW9uX19jb250cm9sLXBhbmVsLWlucHV0LS1jaGFuc2Utb2Ytd2luJ1xyXG4pXHJcbmNvbnN0IGNvbnRyb2xsUGFuZWxJbnB1dEluZm9WYWx1ZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2ltdWxhdGlvbl9fY29udHJvbC1wYW5lbC1pbnB1dC12YWx1ZScpXHJcbmNvbnN0IGhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXInKVxyXG5sZXQgd2lkdGggPSAzMjBcclxubGV0XHRoZWlnaHQgPSAyMDBcclxubGV0XHRtYXJnaW4gPSA0NVxyXG5sZXQgbWVkaWFRdWVyeVNtYWxsID0gd2luZG93Lm1hdGNoTWVkaWEoJyhtaW4td2lkdGg6IDU3NnB4KScpO1xyXG5sZXQgbWVkaWFRdWVyeU1lZGl1bSA9IHdpbmRvdy5tYXRjaE1lZGlhKCcobWluLXdpZHRoOiA3NjhweCknKTtcclxubGV0IG1lZGlhUXVlcnlFeHRyYUxhcmdlID0gd2luZG93Lm1hdGNoTWVkaWEoJyhtaW4td2lkdGg6IDEyMDBweCknKTtcclxubGV0IHJvdW5kcyA9ICtjb250cm9sbFBhbmVsSW5wdXRSb3VuZHMudmFsdWVcclxubGV0IGluaXRpYWxDYXBpdGFsID0gK2NvbnRyb2xsUGFuZWxJbnB1dEluaXRpYWxDYXBpdGFsLnZhbHVlXHJcbmxldCBudW1iZXJPZlBsYXllcnNGb3JTdHJhdGVneSA9ICtjb250cm9sbFBhbmVsSW5wdXROdW1iZXJPZlBsYXllcnNGb3JBU3RyYXRlZ3kudmFsdWVcclxubGV0IGNoYW5zZU9mV2luT2ZUaGVTdHJhdGVneSA9ICtjb250cm9sbFBhbmVsSW5wdXRDaGFuc2VPZldpbkZvclN0cmF0ZWd5LnZhbHVlIC8gMTAwXHJcbmxldCBsYXN0Um91bmRzID0gW11cclxubGV0IG51bUxpbmVzID0gMTBcclxubGV0IGhlYWRlckhlaWdodCA9IGhlYWRlci5jbGllbnRIZWlnaHRcclxuY29uc29sZS5sb2coaGVhZGVySGVpZ2h0KTtcclxubGV0IGhlYWRlcldpZHRoID0gaGVhZGVyLmNsaWVudFdpZHRoXHJcbmxldCB0aWNrU3BhY2luZyA9IE1hdGguY2VpbChyb3VuZHMgLyAxMClcclxubGV0IHRpY2tWYWx1ZXMgPSBkMy5yYW5nZSgwLCByb3VuZHMgKyAxLCB0aWNrU3BhY2luZylcclxuXHJcblxyXG5cclxuY29uc3QgaGVhZGVyU2NhbGVYID0gZDMuc2NhbGVMaW5lYXIoKS5kb21haW4oWzAsIDEwMF0pLnJhbmdlKFswLCBoZWFkZXJXaWR0aF0pXHJcblxyXG5jb25zdCBoZWFkZXJTY2FsZVkgPSBkMy5zY2FsZUxpbmVhcigpLmRvbWFpbihbLTIwLCAyMF0pLnJhbmdlKFtoZWFkZXJIZWlnaHQsIDBdKVxyXG5cclxuY29uc3QgaGVhZGVyQmFja2dyb3VuZFN2ZyA9IGQzXHJcblx0LnNlbGVjdCgnLmhlYWRlcl9fc3ZnJylcclxuXHQuYXR0cignd2lkdGgnLCBoZWFkZXJXaWR0aClcclxuXHQuYXR0cignaGVpZ2h0JywgaGVhZGVySGVpZ2h0ICsgaGVhZGVySGVpZ2h0ICogMC4zKVxyXG5cclxuY29uc3QgaGVhZGVyQ3JlYXRlTGluZXMgPSBkM1xyXG5cdC5saW5lKClcclxuXHQueChkID0+IGhlYWRlclNjYWxlWChkLngpKVxyXG5cdC55KGQgPT4gaGVhZGVyU2NhbGVZKGQueSkpXHJcblx0LmN1cnZlKGQzLmN1cnZlTGluZWFyKVxyXG5cclxuY29uc3QgaGVhZGVyTGluZXNHcm91cCA9IGhlYWRlckJhY2tncm91bmRTdmcuYXBwZW5kKCdnJylcclxuXHJcbmNvbnN0IGhlYWRlckxpbmVzRGF0YSA9IGhlYWRlckxpbmVzR3JvdXBcclxuXHQuc2VsZWN0QWxsKCcuaGVhZGVyX19zdmctbGluZScpXHJcblx0LmRhdGEoQXJyYXkuZnJvbSh7IGxlbmd0aDogbnVtTGluZXMgfSwgZ2VuZXJhdGVSYW5kb21QYXRoKSlcclxuXHJcbmNvbnN0IGhlYWRlckxpbmVzID0gaGVhZGVyTGluZXNEYXRhXHJcblx0LmVudGVyKClcclxuXHQuYXBwZW5kKCdwYXRoJylcclxuXHQuYXR0cignY2xhc3MnLCAnaGVhZGVyX19zdmctbGluZScpXHJcblx0Lm1lcmdlKGhlYWRlckxpbmVzRGF0YSlcclxuXHQuYXR0cignZCcsIGhlYWRlckNyZWF0ZUxpbmVzKVxyXG5cdC5hdHRyKCdzdHJva2UnLCAoZCwgaSkgPT4gZDMuaW50ZXJwb2xhdGVCbHVlcyhpIC8gbnVtTGluZXMpKVxyXG5cdC5hdHRyKCdzdHJva2Utd2lkdGgnLCAyKVxyXG5cdC5hdHRyKCdmaWxsJywgJ25vbmUnKVxyXG5cdC5hdHRyKCdvcGFjaXR5JywgMC42KVxyXG5cclxuaGVhZGVyQmFja2dyb3VuZFN2Zy5vbignbW91c2Vtb3ZlJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcblx0Y29uc3QgW21vdXNlWCwgbW91c2VZXSA9IGQzLnBvaW50ZXIoZXZlbnQpXHJcblxyXG5cdGhlYWRlckxpbmVzLmVhY2goZnVuY3Rpb24gKGQpIHtcclxuXHRcdGxldCBuZXdEYXRhID0gZC5tYXAocG9pbnQgPT4ge1xyXG5cdFx0XHRsZXQgZHggPSBoZWFkZXJTY2FsZVgocG9pbnQueCkgLSBtb3VzZVhcclxuXHRcdFx0bGV0IGR5ID0gaGVhZGVyU2NhbGVZKHBvaW50LnkpIC0gbW91c2VZXHJcblx0XHRcdGxldCBkaXN0YW5jZSA9IE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSlcclxuXHJcblx0XHRcdGlmIChkaXN0YW5jZSA8IDEwMCkge1xyXG5cdFx0XHRcdC8vIFByw7NnIGR6aWHFgmFuaWEgZWZla3R1XHJcblx0XHRcdFx0bGV0IGFuZ2xlID0gTWF0aC5hdGFuMihkeSwgZHgpXHJcblx0XHRcdFx0bGV0IGZvcmNlID0gKDEwMCAtIGRpc3RhbmNlKSAvIDIwIC8vIFNpxYJhIG9kcHljaGFuaWFcclxuXHRcdFx0XHRyZXR1cm4ge1xyXG5cdFx0XHRcdFx0eDogcG9pbnQueCArIE1hdGguY29zKGFuZ2xlKSAqIGZvcmNlLFxyXG5cdFx0XHRcdFx0eTogcG9pbnQueSArIE1hdGguc2luKGFuZ2xlKSAqIGZvcmNlLFxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gcG9pbnRcclxuXHRcdH0pXHJcblx0XHRkMy5zZWxlY3QodGhpcykudHJhbnNpdGlvbigpLmR1cmF0aW9uKDIwMCkuZWFzZShkMy5lYXNlTGluZWFyKS5hdHRyKCdkJywgaGVhZGVyQ3JlYXRlTGluZXMobmV3RGF0YSkpXHJcblx0fSlcclxufSlcclxubGV0IHRpbWVvdXRcclxuaGVhZGVyQmFja2dyb3VuZFN2Zy5vbignbW91c2VsZWF2ZScsIGZ1bmN0aW9uICgpIHtcclxuXHRjbGVhclRpbWVvdXQodGltZW91dClcclxuXHR0aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRoZWFkZXJMaW5lc1xyXG5cdFx0XHQudHJhbnNpdGlvbigpXHJcblx0XHRcdC5kdXJhdGlvbig1MDApXHJcblx0XHRcdC5lYXNlKGQzLmVhc2VDdWJpY091dClcclxuXHRcdFx0LmF0dHIoJ2QnLCBkID0+IGhlYWRlckNyZWF0ZUxpbmVzKGQpKVxyXG5cdH0sIDMwMClcclxufSlcclxuY29uc3Qgc3RyYXRlZ2llcyA9IHtcclxuXHRmbGF0QmV0OiAoY2FwaXRhbCwgYmV0KSA9PiBiZXQsXHJcblx0bWFydGluZ2FsZTogKGNhcGl0YWwsIGJldCwgcHJldkxvc3MpID0+IChwcmV2TG9zcyA/IGJldCAqIDIgOiBiZXQpLFxyXG5cdGFudGlNYXJ0aW5nYWxlOiAoY2FwaXRhbCwgYmV0LCBwcmV2TG9zcykgPT4gKHByZXZMb3NzID8gYmV0IDogYmV0ICogMiksXHJcbn1cclxuY29uc3QgYmFzZUNvbG9ycyA9IHtcclxuXHRmbGF0QmV0OiBkMy5oc2woJ2dyZWVuJyksXHJcblx0bWFydGluZ2FsZTogZDMuaHNsKCdyZWQnKSxcclxuXHRhbnRpTWFydGluZ2FsZTogZDMuaHNsKCdibHVlJyksXHJcbn1cclxuXHJcbi8vIEZ1bmN0aW9uIHRvIGdlbmVyYXRlIGRpZmZlcmVudCBzaGFkZXMgZm9yIG11bHRpcGxlIHBsYXllcnNcclxuY29uc3QgZ2V0U2hhZGVkQ29sb3IgPSAoc3RyYXRlZ3ksIHBsYXllckluZGV4LCB0b3RhbFBsYXllcnMpID0+IHtcclxuXHRsZXQgYmFzZUNvbG9yID0gYmFzZUNvbG9yc1tzdHJhdGVneV0gLy8gR2V0IGJhc2UgY29sb3JcclxuXHRsZXQgZmFjdG9yID0gMSAtIChwbGF5ZXJJbmRleCAvICh0b3RhbFBsYXllcnMgKyAxKSkgKiAwLjc1XHJcblx0bGV0IGhGYWN0b3IgPSAocGxheWVySW5kZXggLyB0b3RhbFBsYXllcnMpICogNzBcclxuXHRyZXR1cm4gZDMuaHNsKGJhc2VDb2xvci5oICsgaEZhY3RvciwgYmFzZUNvbG9yLnMsIGJhc2VDb2xvci5sICogZmFjdG9yKS5mb3JtYXRSZ2IoKVxyXG59XHJcblxyXG5sZXQgc3RyYXRlZ3lQbGF5ZXJzID0ge1xyXG5cdGZsYXRCZXQ6IFtdLFxyXG5cdG1hcnRpbmdhbGU6IFtdLFxyXG5cdGFudGlNYXJ0aW5nYWxlOiBbXSxcclxufVxyXG5cclxuXHJcbmlmIChtZWRpYVF1ZXJ5U21hbGwubWF0Y2hlcykge1xyXG4gICAgIHdpZHRoID0gNDAwXHJcblx0aGVpZ2h0ID0gMjUwXHJcbn1cclxuaWYgKG1lZGlhUXVlcnlNZWRpdW0ubWF0Y2hlcykge1xyXG4gICAgIHdpZHRoID0gNTAwXHJcblx0aGVpZ2h0ID0gMzAwXHJcblxyXG59XHJcblxyXG5pZiAobWVkaWFRdWVyeUV4dHJhTGFyZ2UubWF0Y2hlcykge1xyXG4gICAgIHdpZHRoID0gNjAwXHJcblx0aGVpZ2h0ID0gMzUwXHJcbn1cclxuXHJcblxyXG5jb25zdCBzY2FsZVggPSBkM1xyXG5cdC5zY2FsZUxpbmVhcigpXHJcblx0LmRvbWFpbihbMCwgcm91bmRzXSlcclxuXHQucmFuZ2UoW21hcmdpbiwgd2lkdGggLSBtYXJnaW5dKVxyXG5jb25zdCBzY2FsZVkgPSBkM1xyXG5cdC5zY2FsZUxpbmVhcigpXHJcblx0LmRvbWFpbihbMCwgaW5pdGlhbENhcGl0YWwgKiAyXSlcclxuXHQucmFuZ2UoW2hlaWdodCAtIG1hcmdpbiwgbWFyZ2luXSlcclxuXHJcbi8vIFR3b3J6ZW5pZSBTVkdcclxuY29uc3Qgc3ZnID0gZDMuc2VsZWN0KCcuc2ltdWxhdGlvbl9fY2hhcnQnKS5hdHRyKCd3aWR0aCcsIHdpZHRoKS5hdHRyKCdoZWlnaHQnLCBoZWlnaHQpXHJcbmNvbnN0IGdyaWRHcm91cCA9IHN2Zy5hcHBlbmQoJ2cnKS5hdHRyKCdjbGFzcycsICdzaW11bGF0aW9uX19jaGFydC1ncmlkLWdyb3VwJylcclxuXHJcblxyXG5jb25zdCB4QXhpcyA9IHN2Z1xyXG5cdC5hcHBlbmQoJ2cnKVxyXG5cdC5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKDAsJHtoZWlnaHQgLSBtYXJnaW59KWApXHJcblx0LmNhbGwoZDMuYXhpc0JvdHRvbShzY2FsZVgpLnRpY2tWYWx1ZXModGlja1ZhbHVlcykpXHJcbmNvbnN0IHlBeGlzID0gc3ZnLmFwcGVuZCgnZycpLmF0dHIoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoJHttYXJnaW59LDApYCkuY2FsbChkMy5heGlzTGVmdChzY2FsZVkpKVxyXG5cclxuY29uc3QgeUdyaWQgPSBkM1xyXG5cdC5heGlzTGVmdChzY2FsZVkpXHJcblx0LnRpY2tTaXplKC13aWR0aCArIDIgKiBtYXJnaW4pXHJcblx0LnRpY2tGb3JtYXQoJycpXHJcblxyXG5jb25zdCBsaW5lID0gZDNcclxuXHQubGluZSgpXHJcblx0LngoZCA9PiBzY2FsZVgoZC5pbmRleCkpXHJcblx0LnkoZCA9PiBzY2FsZVkoZC52YWx1ZSkpXHJcblx0LmN1cnZlKGQzLmN1cnZlTGluZWFyKVxyXG5cclxuY29uc3QgcGF0aEdyb3VwID0gc3ZnLmFwcGVuZCgnZycpXHJcbmNvbnN0IHBvaW50c0dyb3VwID0gc3ZnLmFwcGVuZCgnZycpXHJcbmNvbnN0IHRvb2x0aXAgPSBzdmcuYXBwZW5kKCdnJykuYXR0cignY2xhc3MnLCAnc2ltdWxhdGlvbl9fY2hhcnQtdG9vbHRpcCcpXHJcbmNvbnN0IHRvb2x0aXBUZXh0ID0gdG9vbHRpcC5hcHBlbmQoJ3RleHQnKVxyXG5cclxuZnVuY3Rpb24gdXBkYXRlQ2hhcnQoKSB7XHJcblx0Z3JpZEdyb3VwLmF0dHIoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoJHttYXJnaW59LDApYCkuY2FsbCh5R3JpZClcclxuXHJcblx0Y29uc3Qgc3RyYXRlZ3lEYXRhID0gT2JqZWN0LmVudHJpZXMoc3RyYXRlZ3lQbGF5ZXJzKS5mbGF0TWFwKChbc3RyYXRlZ3ksIHBsYXllcnNdKSA9PlxyXG5cdFx0cGxheWVycy5tYXAoKHBsYXllckRhdGEsIGluZGV4KSA9PiAoe1xyXG5cdFx0XHRzdHJhdGVneSxcclxuXHRcdFx0cGxheWVyRGF0YSxcclxuXHRcdFx0cGxheWVySW5kZXg6IGluZGV4LFxyXG5cdFx0XHR0b3RhbFBsYXllcnM6IHBsYXllcnMubGVuZ3RoLFxyXG5cdFx0fSkpXHJcblx0KVxyXG5cdGNvbnN0IHN0cmF0ZWd5TGluZXMgPSBwYXRoR3JvdXAuc2VsZWN0QWxsKCcuc3RyYXRlZ3ktbGluZScpLmRhdGEoc3RyYXRlZ3lEYXRhKVxyXG5cclxuXHRzdHJhdGVneUxpbmVzXHJcblx0XHQuZW50ZXIoKVxyXG5cdFx0LmFwcGVuZCgncGF0aCcpXHJcblx0XHQuYXR0cignY2xhc3MnLCAnc3RyYXRlZ3ktbGluZScpXHJcblx0XHQuYXR0cignc3Ryb2tlJywgZCA9PiBnZXRTaGFkZWRDb2xvcihkLnN0cmF0ZWd5LCBkLnBsYXllckluZGV4LCBkLnRvdGFsUGxheWVycykpXHJcblx0XHQuYXR0cignc3Ryb2tlLXdpZHRoJywgMilcclxuXHRcdC5hdHRyKCdmaWxsJywgJ25vbmUnKVxyXG5cdFx0LmF0dHIoJ2QnLCBkID0+IGxpbmUoZC5wbGF5ZXJEYXRhKSlcclxuXHRcdC5lYWNoKGZ1bmN0aW9uIChkKSB7XHJcblx0XHRcdGNvbnN0IHRvdGFsTGVuZ3RoID0gdGhpcy5nZXRUb3RhbExlbmd0aCgpXHJcblx0XHRcdGQzLnNlbGVjdCh0aGlzKVxyXG5cdFx0XHRcdC5hdHRyKCdzdHJva2UtZGFzaGFycmF5JywgdG90YWxMZW5ndGggKyAnICcgKyB0b3RhbExlbmd0aClcclxuXHRcdFx0XHQuYXR0cignc3Ryb2tlLWRhc2hvZmZzZXQnLCB0b3RhbExlbmd0aClcclxuXHRcdFx0XHQudHJhbnNpdGlvbigpXHJcblx0XHRcdFx0LmR1cmF0aW9uKDc1MClcclxuXHRcdFx0XHQuZWFzZShkMy5lYXNlTGluZWFyKVxyXG5cdFx0XHRcdC5hdHRyKCdzdHJva2UtZGFzaG9mZnNldCcsIDApXHJcblx0XHR9KVxyXG5cdFx0Lm1lcmdlKHN0cmF0ZWd5TGluZXMpXHJcblx0XHQuYXR0cignZCcsIGQgPT4gbGluZShkLnBsYXllckRhdGEpKVxyXG5cclxuXHRzdHJhdGVneUxpbmVzLmV4aXQoKS5yZW1vdmUoKVxyXG59XHJcblxyXG5jb25zdCBjaGFuZ2VDb250cm9sbFBhbmVsSW5wdXRJbmZvVmFsdWVzID0gKCkgPT4ge1xyXG5cdGNvbnRyb2xsUGFuZWxJbnB1dEluZm9WYWx1ZXMuZm9yRWFjaChJbmZvVmFsdWUgPT4ge1xyXG5cdFx0Y29uc3QgaW5wdXRPZkluZm9WYWx1ZSA9IEluZm9WYWx1ZS5wYXJlbnRFbGVtZW50Lm5leHRFbGVtZW50U2libGluZ1xyXG5cclxuXHRcdEluZm9WYWx1ZS50ZXh0Q29udGVudCA9IGlucHV0T2ZJbmZvVmFsdWUudmFsdWVcclxuXHJcblx0XHRpZiAoaW5wdXRPZkluZm9WYWx1ZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtYWRkLXBlcmNlbnRhZ2UnKSkge1xyXG5cdFx0XHRJbmZvVmFsdWUudGV4dENvbnRlbnQgPSBgJHtJbmZvVmFsdWUudGV4dENvbnRlbnR9JWBcclxuXHRcdH1cclxuXHR9KVxyXG59XHJcblxyXG5jb25zdCBjaGFuZ2VBQ29udHJvbGxQYW5lbElucHV0SW5mb1ZhbHVlID0gKCkgPT4ge1xyXG5cdGNvbnRyb2xsUGFuZWxJbnB1dEluZm9WYWx1ZXMuZm9yRWFjaChJbmZvVmFsdWUgPT4ge1xyXG5cdFx0Y29uc3QgaW5wdXRPZkluZm9WYWx1ZSA9IEluZm9WYWx1ZS5wYXJlbnRFbGVtZW50LnByZXZpb3VzRWxlbWVudFNpYmxpbmdcclxuXHRcdGlmIChpbnB1dE9mSW5mb1ZhbHVlID09PSB0aGlzKSB7XHJcblx0XHRcdGlmIChJbmZvVmFsdWUuY2xhc3NMaXN0LmNvbnRhaW5zKCdzaW11bGF0aW9uX19jb250cm9sLXBhbmVsLWluZm8tdmFsdWUtLWN1cnJlbnQnKSkge1xyXG5cdFx0XHRcdEluZm9WYWx1ZS50ZXh0Q29udGVudCA9IGlucHV0T2ZJbmZvVmFsdWUudmFsdWVcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH0pXHJcbn1cclxuZnVuY3Rpb24gZ2VuZXJhdGVSYW5kb21QYXRoKCkge1xyXG5cdGxldCBkYXRhID0gW11cclxuXHRsZXQgeSA9IDE1XHJcblx0Zm9yIChsZXQgeCA9IDA7IHggPD0gMTAwOyB4ICs9IDEwKSB7XHJcblx0XHR5ICs9IChNYXRoLnJhbmRvbSgpIC0gMC43NSkgKiAxMFxyXG5cdFx0ZGF0YS5wdXNoKHsgeCwgeSB9KVxyXG5cdH1cclxuXHRyZXR1cm4gZGF0YVxyXG59XHJcbmNvbnN0IHJlbW92ZVN0cmF0ZWd5RnJvbUNoYXJ0ID0gKCkgPT4ge1xyXG5cdGNvbnRyb2xsUGFuZWxDaGVja2JveGVzLmZvckVhY2goY2hlY2tib3ggPT4ge1xyXG5cdFx0Y29uc3Qgc3RyYXRlZ3lOYW1lID0gY2hlY2tib3guZGF0YXNldC5zdHJhdGVneU5hbWVcclxuXHRcdGlmIChjaGVja2JveC5jaGVja2VkKSB7XHJcblx0XHRcdHN0cmF0ZWdpZXNbc3RyYXRlZ3lOYW1lXSA9IGhhbmRsZVN0cmF0ZWdpZXNGdW5jdGlvbnMoc3RyYXRlZ3lOYW1lKVxyXG5cdFx0XHRzdHJhdGVneVBsYXllcnNbc3RyYXRlZ3lOYW1lXSA9IFtdXHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRkZWxldGUgc3RyYXRlZ2llc1tzdHJhdGVneU5hbWVdXHJcblx0XHRcdGRlbGV0ZSBzdHJhdGVneVBsYXllcnNbc3RyYXRlZ3lOYW1lXVxyXG5cdFx0fVxyXG5cdH0pXHJcblx0dXBkYXRlQ2hhcnQoKVxyXG59XHJcblxyXG5mdW5jdGlvbiBkaXNhYmxlQ2hlY2tib3goKSB7XHJcblx0bGV0IG51bU9mU2VsZWN0ZWRDaGVja2JveGVzID0gY29udHJvbGxQYW5lbENoZWNrYm94ZXMubGVuZ3RoXHJcblxyXG5cdGNvbnRyb2xsUGFuZWxDaGVja2JveGVzLmZvckVhY2goY2hlY2tib3ggPT4ge1xyXG5cdFx0aWYgKCFjaGVja2JveC5jaGVja2VkKSB7XHJcblx0XHRcdG51bU9mU2VsZWN0ZWRDaGVja2JveGVzLS1cclxuXHRcdH1cclxuXHR9KVxyXG5cdGNvbnRyb2xsUGFuZWxDaGVja2JveGVzLmZvckVhY2goY2hlY2tib3ggPT4ge1xyXG5cdFx0aWYgKGNoZWNrYm94LmNoZWNrZWQgJiYgbnVtT2ZTZWxlY3RlZENoZWNrYm94ZXMgPT09IDEpIHtcclxuXHRcdFx0Y2hlY2tib3guZGlzYWJsZWQgPSB0cnVlXHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRjaGVja2JveC5kaXNhYmxlZCA9IGZhbHNlXHJcblx0XHR9XHJcblx0fSlcclxufVxyXG5jb25zdCBjaGFuZ2VCZXRWYWx1ZSA9ICgpID0+IHtcclxuXHRyZXR1cm4gaW5pdGlhbENhcGl0YWwgKiAoK2NvbnRyb2xsUGFuZWxJbnB1dEJldC52YWx1ZSAvIDEwMClcclxufVxyXG5mdW5jdGlvbiBjb3JyZWN0Q29udHJvbGxQYW5lbElucHV0c1ZhbHVlcygpIHtcclxuXHRjb250cm9sbFBhbmVsSW5wdXRzLmZvckVhY2goaW5wdXQgPT4ge1xyXG5cdFx0bGV0IGlucHV0VmFsdWUgPSBpbnB1dC52YWx1ZS5yZXBsYWNlKC9cXEQvZywgJycpXHJcblxyXG5cdFx0aWYgKGlucHV0VmFsdWUgPCAraW5wdXQuZ2V0QXR0cmlidXRlKCdtaW4nKSB8fCBpbnB1dFZhbHVlID09PSAnJykge1xyXG5cdFx0XHRpbnB1dFZhbHVlID0gK2lucHV0LmdldEF0dHJpYnV0ZSgnbWluJylcclxuXHRcdH0gZWxzZSBpZiAoaW5wdXRWYWx1ZSA+ICtpbnB1dC5nZXRBdHRyaWJ1dGUoJ21heCcpKSB7XHJcblx0XHRcdGlucHV0VmFsdWUgPSAraW5wdXQuZ2V0QXR0cmlidXRlKCdtYXgnKVxyXG5cdFx0fVxyXG5cdFx0aW5wdXQudmFsdWUgPSBpbnB1dFZhbHVlXHJcblx0fSlcclxuXHRyb3VuZHMgPSArY29udHJvbGxQYW5lbElucHV0Um91bmRzLnZhbHVlXHJcblx0aW5pdGlhbENhcGl0YWwgPSArY29udHJvbGxQYW5lbElucHV0SW5pdGlhbENhcGl0YWwudmFsdWVcclxuXHRudW1iZXJPZlBsYXllcnNGb3JTdHJhdGVneSA9ICtjb250cm9sbFBhbmVsSW5wdXROdW1iZXJPZlBsYXllcnNGb3JBU3RyYXRlZ3kudmFsdWVcclxuXHRjaGFuc2VPZldpbk9mVGhlU3RyYXRlZ3kgPSArY29udHJvbGxQYW5lbElucHV0Q2hhbnNlT2ZXaW5Gb3JTdHJhdGVneS52YWx1ZSAvIDEwMFxyXG59XHJcbmNvbnN0IGhhbmRsZVN0cmF0ZWdpZXNGdW5jdGlvbnMgPSBzdHJhdGVneU5hbWUgPT4ge1xyXG5cdGNvbnN0IHN0cmF0ZWdpZXNGdW5jdGlvbnMgPSB7XHJcblx0XHRmbGF0QmV0OiAoY2FwaXRhbCwgYmV0KSA9PiBiZXQsXHJcblx0XHRtYXJ0aW5nYWxlOiAoY2FwaXRhbCwgYmV0LCBwcmV2TG9zcykgPT4gKHByZXZMb3NzID8gYmV0ICogMiA6IGJldCksXHJcblx0XHRhbnRpTWFydGluZ2FsZTogKGNhcGl0YWwsIGJldCwgcHJldkxvc3MpID0+IChwcmV2TG9zcyA/IGJldCA6IGJldCAqIDIpLFxyXG5cdH1cclxuXHRyZXR1cm4gc3RyYXRlZ2llc0Z1bmN0aW9uc1tzdHJhdGVneU5hbWVdXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNpbXVsYXRlR2FtZSgpIHtcclxuXHRjb3JyZWN0Q29udHJvbGxQYW5lbElucHV0c1ZhbHVlcygpXHJcblx0cmVtb3ZlU3RyYXRlZ3lGcm9tQ2hhcnQoKVxyXG5cdGxhc3RSb3VuZHMgPSBbXVxyXG5cdE9iamVjdC5rZXlzKHN0cmF0ZWdpZXMpLmZvckVhY2goc3RyYXRlZ3kgPT4ge1xyXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBudW1iZXJPZlBsYXllcnNGb3JTdHJhdGVneTsgaSsrKSB7XHJcblx0XHRcdGxldCBwbGF5ZXJEYXRhID0gW3sgaW5kZXg6IDAsIHZhbHVlOiBpbml0aWFsQ2FwaXRhbCB9XVxyXG5cdFx0XHRsZXQgYmV0ID0gY2hhbmdlQmV0VmFsdWUoKVxyXG5cclxuXHRcdFx0Zm9yIChsZXQgcm91bmQgPSAxOyByb3VuZCA8PSByb3VuZHM7IHJvdW5kKyspIHtcclxuXHRcdFx0XHRsZXQgY2hhbmdlID0gTWF0aC5yYW5kb20oKSA8IGNoYW5zZU9mV2luT2ZUaGVTdHJhdGVneSA/IGJldCA6IC1iZXRcclxuXHRcdFx0XHRsZXQgbmV3VmFsdWUgPSBNYXRoLm1heCgwLCBwbGF5ZXJEYXRhW3JvdW5kIC0gMV0udmFsdWUgKyBjaGFuZ2UpXHJcblxyXG5cdFx0XHRcdGJldCA9IHN0cmF0ZWdpZXNbc3RyYXRlZ3ldKG5ld1ZhbHVlLCBiZXQsIGNoYW5nZSA8IDApXHJcblxyXG5cdFx0XHRcdHBsYXllckRhdGEucHVzaCh7IGluZGV4OiByb3VuZCwgdmFsdWU6IG5ld1ZhbHVlIH0pXHJcblxyXG5cdFx0XHRcdGlmIChuZXdWYWx1ZSA9PT0gMCkge1xyXG5cdFx0XHRcdFx0bGFzdFJvdW5kcy5wdXNoKHJvdW5kKVxyXG5cdFx0XHRcdFx0YnJlYWtcclxuXHRcdFx0XHR9IGVsc2UgaWYgKHJvdW5kID09PSByb3VuZHMpIHtcclxuXHRcdFx0XHRcdGxhc3RSb3VuZHMucHVzaChyb3VuZHMpXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRzdHJhdGVneVBsYXllcnNbc3RyYXRlZ3ldLnB1c2gocGxheWVyRGF0YSlcclxuXHRcdH1cclxuXHR9KVxyXG5cdGNvbnN0IG1heFZhbHVlT2ZMYXN0Um91bmRzID0gTWF0aC5tYXgoLi4ubGFzdFJvdW5kcylcclxuXHRzY2FsZVguZG9tYWluKFswLCBtYXhWYWx1ZU9mTGFzdFJvdW5kc10pXHJcblx0c2NhbGVZLmRvbWFpbihbMCwgZDMubWF4KE9iamVjdC52YWx1ZXMoc3RyYXRlZ3lQbGF5ZXJzKS5mbGF0KDIpLCBkID0+IGQudmFsdWUpICogMS4xXSlcclxuXHR0aWNrU3BhY2luZyA9IE1hdGguY2VpbChtYXhWYWx1ZU9mTGFzdFJvdW5kcyAvIDEwKVxyXG5cdHRpY2tWYWx1ZXMgPSBkMy5yYW5nZSgwLCBtYXhWYWx1ZU9mTGFzdFJvdW5kcyArIDEsIHRpY2tTcGFjaW5nKVxyXG5cdHhBeGlzLnRyYW5zaXRpb24oKS5kdXJhdGlvbig1MDApLmNhbGwoZDMuYXhpc0JvdHRvbShzY2FsZVgpLnRpY2tWYWx1ZXModGlja1ZhbHVlcykpXHJcblx0eUF4aXNcclxuXHRcdC50cmFuc2l0aW9uKClcclxuXHRcdC5kdXJhdGlvbig1MDApXHJcblx0XHQuY2FsbChkMy5heGlzTGVmdChzY2FsZVkpLnRpY2tGb3JtYXQoZDMuZm9ybWF0KCcuMnMnKSkpXHJcblxyXG5cdHVwZGF0ZUNoYXJ0KClcclxufVxyXG5cclxuZDMuc2VsZWN0KCcuc2ltdWxhdGlvbl9fY29udHJvbC1wYW5lbC1idG4tc3RhcnQnKS5vbignY2xpY2snLCBzaW11bGF0ZUdhbWUpXHJcblxyXG5jaGFuZ2VDb250cm9sbFBhbmVsSW5wdXRJbmZvVmFsdWVzKClcclxuY29udHJvbGxQYW5lbENoZWNrYm94ZXMuZm9yRWFjaChjaGVja2JveCA9PiBjaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBkaXNhYmxlQ2hlY2tib3gpKVxyXG5jb250cm9sbFBhbmVsSW5wdXRzLmZvckVhY2goaW5wdXQgPT4gaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBjaGFuZ2VDb250cm9sbFBhbmVsSW5wdXRJbmZvVmFsdWVzKSlcclxuY29udHJvbGxQYW5lbElucHV0QmV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgY2hhbmdlQmV0VmFsdWUpXHJcbmNvbnRyb2xsUGFuZWxJbnB1dEluaXRpYWxDYXBpdGFsLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgY2hhbmdlQmV0VmFsdWUpXHJcbiJdfQ==
